<Page x:Class="Calculadora_IMC.Views.MainPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:sys="clr-namespace:System;assembly=mscorlib"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:viewmodels="clr-namespace:Calculadora_IMC.ViewModels" d:DataContext="{d:DesignInstance Type=viewmodels:MainPageViewModel}"
      mc:Ignorable="d"
      Background="#F7F5EB">

    <Page.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/Styles/ButtonStyles.xaml" />
                <ResourceDictionary Source="pack://application:,,,/Styles/DataGridStyles.xaml"/>
                <ResourceDictionary Source="pack://application:,,,/Styles/TextBoxStyles.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Page.Resources>

    <Grid>
        <StackPanel HorizontalAlignment="Center"
            Orientation="Vertical"
            Margin="10">
            <TextBlock Text="Usuários"
			FontSize="30"
			TextAlignment="Center"
			Margin="0,35,0,20"
            Style="{StaticResource PageTitleTextBlock}"/>

            <Button Content="Adicionar Usuário"
            Width="120"
            Height="40"
            HorizontalAlignment="Right"
            VerticalAlignment="Center"
			Margin="0,0,5,10"
			Cursor="Hand"
			Style="{StaticResource RoundedGreenButton}"
			Command="{Binding AddUserCommand}"/>

            <TextBox x:Name="SearchBox"
            Width="300"
            Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
            Style="{StaticResource RoundedSearchTextBox}"
            VerticalContentAlignment="Center"
            Padding="5"
            Margin="0,20,0,10"/>

            <DataGrid ItemsSource="{Binding UsuariosView}"
            AutoGenerateColumns="False"
            CanUserAddRows="False"
            IsReadOnly="True"
            CanUserReorderColumns="False"
            CanUserResizeRows="False"
            CanUserResizeColumns="False"
            Width="600"
            Height="300"
            Margin="10"
            HeadersVisibility="Column"
            GridLinesVisibility="None"
            RowBackground="White"
            AlternatingRowBackground="#F2F2F2"
            BorderBrush="#DDD"
            BorderThickness="1"
            RowHeight="35"
            HorizontalGridLinesBrush="#DDD"
            VerticalGridLinesBrush="#DDD"
            FontSize="14"
            FontFamily="Segoe UI"
            SelectionMode="Single"
            SelectionUnit="FullRow"
            CellStyle="{StaticResource CentralizedCellStyle}"
            ColumnHeaderStyle="{StaticResource CustomColumnHeaderStyle}">

                <DataGrid.Resources>
                    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Transparent"/>
                    <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="Transparent"/>
                    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}" Color="Black"/>
                </DataGrid.Resources>

                <DataGrid.Columns>
                    <DataGridTextColumn Header="Nome" Binding="{Binding Nome}" Width="200" ElementStyle="{StaticResource CenteredTextBlockStyle}"/>
                    <DataGridTextColumn Header="Idade" Binding="{Binding Idade}" Width="50" ElementStyle="{StaticResource CenteredTextBlockStyle}"/>
                    <DataGridTextColumn Header="Altura (m)" Binding="{Binding Altura}" Width="80" ElementStyle="{StaticResource CenteredTextBlockStyle}"/>
                    <DataGridTextColumn Header="Peso (kg)" Binding="{Binding PesoUltimaMedicao}" Width="75" ElementStyle="{StaticResource CenteredTextBlockStyle}"/>
                    <DataGridTextColumn Header="Gênero" Binding="{Binding Genero}" Width="70" ElementStyle="{StaticResource CenteredTextBlockStyle}"/>
                    <DataGridTextColumn Header="IMC" Binding="{Binding IMCUltimaMedicao, StringFormat=N2}" Width="40" ElementStyle="{StaticResource CenteredTextBlockStyle}"/>
                    <DataGridTemplateColumn Header="Ações" Width="*">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                    <Button Content="&#xE890;"
                                    FontFamily="Segoe MDL2 Assets"
                                    FontSize="16"
                                    Background="Transparent"
                                    BorderBrush="Transparent"
                                    Cursor="Hand"
                                    Command="{Binding DataContext.ViewUserCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}"
                                    CommandParameter="{Binding}"
                                    ToolTip="Visualizar usuário"/>

                                    <Button Content="&#xE74D;"
                                    FontFamily="Segoe MDL2 Assets"
                                    Foreground="Red"
                                    FontSize="16"
                                    Background="Transparent"
                                    BorderBrush="Transparent"
                                    Cursor="Hand"
                                    Command="{Binding DataContext.DeleteUserCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}"
                                    CommandParameter="{Binding}"
                                    ToolTip="Deletar usuário"
                                    Margin="10,0,0,0"
                                    TextOptions.TextFormattingMode="Display"
                                    TextOptions.TextRenderingMode="ClearType"/>
                                </StackPanel>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>

        </StackPanel>
    </Grid>
</Page>